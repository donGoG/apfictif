/******/!function(o){function e(t){if(n[t])return n[t].exports;var r=n[t]={exports:{},id:t,loaded:!1};return o[t].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}// webpackBootstrap
/******/
var n={};return e.m=o,e.c=n,e.p="",e(0)}([function(o,e,n){"use strict";function t(o){return o&&o.__esModule?o:{"default":o}}var r=n(1),i=t(r),c=n(2),s=n(3),a=n(4),l=n(5),u=n(6),m=n(7),d=n(8);angular.module("apfictif",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngAria","ngResource","ui.router","toastr"]).constant("moment",moment).constant("settings",i["default"]).config(c.config).config(s.routerConfig).run(a.runBlock).controller("MainController",l.MainController).controller("UIController",u.UIController).directive("circlecreator",d.CircleCreatorDirective).directive("room",m.RoomDirective)},function(o,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={center:{name:"chambre"},rooms:[{size:14,colour:"#000",opacity:.3,name:"wc"},{size:12,colour:"#000",opacity:.3,name:"cuisine"},{size:7,colour:"#fd6c9e",opacity:.7,name:"salon"},{size:10,colour:"#00c9e6",opacity:.7,name:"salle de bain"},{size:7,colour:"#98f997",opacity:.85,name:"entrée"},{size:3,colour:"#FFFF00",opacity:.6,name:"sortie"},{size:3,colour:"#000",opacity:.4,name:"sortie"},{size:3,colour:"#000",opacity:.2,name:"sortie"}],directions:4,scale:8};e["default"]=n,o.exports=e["default"]},function(o,e){"use strict";function n(o){"ngInject";o.debugEnabled(!0)}n.$inject=["$logProvider"],Object.defineProperty(e,"__esModule",{value:!0}),e.config=n},function(o,e){"use strict";function n(o,e){"ngInject";o.state("home",{url:"/",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main"}),e.otherwise("/")}n.$inject=["$stateProvider","$urlRouterProvider"],Object.defineProperty(e,"__esModule",{value:!0}),e.routerConfig=n},function(o,e){"use strict";function n(o){"ngInject";o.debug("runBlock end")}n.$inject=["$log"],Object.defineProperty(e,"__esModule",{value:!0}),e.runBlock=n},function(o,e){"use strict";function n(o,e){if(!(o instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function o(o,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(o,t.key,t)}}return function(e,n,t){return n&&o(e.prototype,n),t&&o(e,t),e}}(),r=function(){function o(e,t,r,i){"ngInject";n(this,o),e.debug("main Ctrl"),t.calculated=0,this.initFirstRoom(t,i,r),t.$on("circle ready",function(){t.calculated++}),t.$on("room ready",function(o,e){e<i.rooms.length-1&&this.createRoom(t,i,e+1)}.bind(this)),t.$on("new config",function(o,e){i.directions=e.directions;for(var n=0;n<i.rooms.length;n++)i.rooms[n].size=e.rooms[n].size;this.resetRooms(t),this.initFirstRoom(t,i,r)}.bind(this)),t.$on("new colours",function(o,e){for(var n=0;n<i.rooms.length;n++)t.$broadcast("room "+n+" config",e.rooms[n])}.bind(this))}return o.$inject=["$log","$scope","$window","settings"],t(o,[{key:"initFirstRoom",value:function(o,e,n){o.rooms=[{id:0,radius:e.rooms[0].size*e.scale,circles:[{posX:n.innerWidth/2,posY:n.innerHeight/2}],"class":"room-0",name:e.rooms[0].name}]}},{key:"resetRooms",value:function(o){o.calculated=0,o.rooms=[]}},{key:"createRoom",value:function(o,e,n){for(var t=o.rooms[n-1],r=[],i=0;i<t.circles.length;i++)for(var c=o.rooms[n-1].circles[i],s=0;s<e.directions;s++){var a=c.posX+t.radius*Math.cos(2*Math.PI*s/e.directions),l=c.posY+t.radius*Math.sin(2*Math.PI*s/e.directions);r.push({posX:a,posY:l})}o.rooms.push({id:n,radius:e.rooms[n].size*e.scale,circles:r,"class":"room-"+n,name:e.rooms[n].name})}}]),o}();e.MainController=r},function(o,e){"use strict";function n(o,e){if(!(o instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var t=function r(o,e,t){"ngInject";n(this,r),o.debug("UI Ctrl"),e.master={},e.config={scale:t.scale,directions:t.directions,rooms:t.rooms,center:t.center},e.update=function(o){e.updateConf(o),e.$emit("new config",e.config)},e.updateColours=function(o){e.updateConf(o),e.$emit("new colours",e.config)},e.updateConf=function(o){t.scale=o.scale,t.directions=o.directions,t.center=o.center,t.rooms=o.rooms}};t.$inject=["$log","$scope","settings"],e.UIController=t},function(o,e){"use strict";function n(o,e){if(!(o instanceof e))throw new TypeError("Cannot call a class as a function")}function t(o){"ngInject";function e(e,n){angular.element(n)[0].style.stroke=o.rooms[e.room.id].colour,angular.element(n)[0].style.fill=o.rooms[e.room.id].colour,angular.element(n)[0].style.opacity=o.rooms[e.room.id].opacity,e.$on("room "+e.room.id+" config",function(o,e){""!=e.colour&&(angular.element(n)[0].style.stroke=e.colour,angular.element(n)[0].style.opacity=e.opacity)}),e.$on("last circle",function(){e.$emit("room ready",e.room.id)})}var n={replace:!0,restrict:"E",templateUrl:"app/components/room/room.html",scope:{room:"="},link:e,controller:r};return n}t.$inject=["settings"],Object.defineProperty(e,"__esModule",{value:!0}),e.RoomDirective=t;var r=function i(o,e){"ngInject";n(this,i),o.svg={width:e.innerWidth,height:e.innerHeight}};r.$inject=["$scope","$window"]},function(o,e){"use strict";function n(o,e){if(!(o instanceof e))throw new TypeError("Cannot call a class as a function")}function t(){"ngInject";function o(o){o.$last&&o.$emit("last circle")}var e={restrict:"A",link:o,controller:r};return e}Object.defineProperty(e,"__esModule",{value:!0}),e.CircleCreatorDirective=t;var r=function i(o){"ngInject";n(this,i),o.$emit("circle ready")};r.$inject=["$scope"]}]),angular.module("apfictif").run(["$templateCache",function(o){o.put("app/main/main.html",'<div class="container"><div class="ui-container" ng-controller="UIController"><b>{{calculated}} cercles dessinés</b><br><br><form novalidate="" class="simple-form"><u>Echelle :</u><input type="range" ng-model="config.scale" max="20" min="1" step="1"> <span>(1pas = {{config.scale}}px)</span><br><u>Directions :</u><input type="range" ng-model="config.directions" value="1" max="8" min="1" step="1"> <span>{{config.directions}}</span><br><br><u>Centre</u>: <input type="input" ng-model="config.center.name"><br><br><div class="room-modifier" ng-repeat="(key, room) in config.rooms"><u>Pièce n°{{key+1}}</u>: <input type="input" ng-model="config.rooms[key].name"><br>nb de pas : <input type="range" ng-model="config.rooms[key].size" max="20" min="1" step="0.5"> <span>{{config.rooms[key].size}}</span><br>opacité : <input type="range" ng-model="config.rooms[key].opacity" ng-change="updateColours(config)" value="0.5" max="1" min="0" step="0.01"> <span>{{config.rooms[key].opacity}}</span><br><input type="color" ng-model="config.rooms[key].colour" ng-change="updateColours(config)"><br><br></div><br><input type="submit" ng-click="update(config)" value="valider"></form></div><room ng-repeat="room in rooms" room="room"></room></div>'),o.put("app/components/room/room.html",'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="{{svg.width}}" height="{{svg.width}}" class="{{room.class}} room"><circle ng-repeat="circle in room.circles" circlecreator="" ng-attr-cx="{{circle.posX}}" ng-attr-cy="{{circle.posY}}" ng-attr-r="{{room.radius}}" fill="none"></circle><line x1="{{svg.width-130}}" y1="{{room.id*30+26}}" x2="{{svg.width-110}}" y2="{{room.id*30+26}}"></line><text id="text-{{room.id}}" x="{{svg.width-100}}" y="{{room.id*30+30}}">{{room.name}}</text></svg>')}]);
//# sourceMappingURL=../maps/scripts/app-d4ca073e29.js.map
